# Incident 上报模板

用于测试 AWS DevOps Agent Prevention 功能的 Incident 描述模板。

---

## 场景A：可观测性缺失

### Incident 上报内容

**标题**: 搜索功能响应时间不稳定，无法定位原因

**描述**:
```
从 [时间] 开始，用户反馈搜索功能响应时间不稳定。

现象：
- 大部分请求 1 秒内返回
- 部分请求需要 5-20 秒
- 问题随机出现，无明显规律

已检查：
- EC2 CPU 利用率：正常（约 10-30%）
- ALB 健康检查：通过
- 无法找到应用层日志

问题：
- 不清楚慢请求的原因
- 无法复现问题
- 缺少诊断信息
```

---

## 场景B：资源瓶颈（OOM）

### Incident 上报内容

**标题**: 报表服务反复崩溃，重启后恢复一段时间又挂

**描述**:
```
从 [时间] 开始，报表生成功能多次不可用。

现象：
- 服务突然无响应
- ALB 健康检查失败
- 重启 Tomcat 后恢复
- 运行一段时间（约 30 分钟到 1 小时）后再次崩溃

已检查：
- EC2 实例状态：正常
- EC2 CPU：崩溃前有短暂飙升
- 内存指标：找不到（CloudWatch 没有内存数据）
- 磁盘空间：正常

怀疑：
- 可能是内存问题，但无法确认
- 与报表生成功能的使用频率可能相关
```

---

## 场景C：复合场景

### Incident 上报内容（第一次）

**标题**: 系统整体响应变慢

**描述**:
```
从 [时间] 开始，多个功能模块响应变慢。

受影响功能：
- 搜索功能
- 报表生成
- 数据导出

现象：
- 响应时间从平均 1 秒增加到 5-10 秒
- 部分请求超时
```

### Incident 上报内容（第二次，几天后）

**标题**: 服务完全不可用

**描述**:
```
服务完全无法访问。

与上次"响应变慢"问题可能相关。
重启后恢复，但担心会再次发生。
```

### Incident 上报内容（第三次）

**标题**: 服务再次崩溃，疑似重复问题

**描述**:
```
又出现先慢后崩的模式。

时间线：
1. 服务正常运行
2. 逐渐变慢（持续数小时）
3. 最终完全无响应

请帮助分析：
- 是否有规律
- 根因是什么
- 如何预防
```

---

## 测试后验证

在 AWS DevOps Agent 的 Prevention 页面验证以下建议是否出现：

### 预期的 Observability 建议
- [ ] 增加应用日志采集到 CloudWatch
- [ ] 配置内存监控（安装 CloudWatch Agent）
- [ ] 设置响应时间告警
- [ ] 增加健康检查的详细程度

### 预期的 Infrastructure 建议
- [ ] 调整 JVM 内存配置
- [ ] 配置 CloudWatch Alarms
- [ ] 考虑自动扩展策略

### 预期的 Code 建议
- [ ] 检查内存泄漏
- [ ] 添加请求超时配置
- [ ] 实现资源使用限制
